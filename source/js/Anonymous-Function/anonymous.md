---
title: 匿名函数
date: 2020-10-27 15:57:12
tag: js
---
## 匿名函数

```js
var add = function(x,y){
    console.log(x*y);
}
add(5,6);
```

匿名函数，顾名思义就是没有名字的函数。函数表达式中的创建，实际上是创建一个匿名函数，并将匿名函数赋值给变量 add，用 add 来进行函数的调用，调用的方式就是在变量 add 后面加上一对括号()，如果有参数传入的话就是 add(1,2)，这就是匿名函数的一种调用方式.

还有一种匿名函数的调用方式是：使用()将匿名函数括起来,然后后面再加一对小括号（包含参数列表）。
**我们再看一下以下一个例子：**
```js
alert((function(x,y){return x+y;})(2,3)) //弹窗提示5  
alert((new Function("x","y","return x+y"))(2,3)) //弹窗显示5 
```

在javascript中，是没有块级作用域这种说法的，以上代码的
这种方式就是模仿了块级作用域(通常成为私有作用域)
```js
(function(){  
    //这里是块级作用域  
})(); 
```
以上代码定义并立即调用了一个匿名函数--经函数声明包含在一对圆括号中，表示它实际上是一个函数表达式而紧随其后的另一对圆括号会立即调用这个函数

### 注意：
```js
function(){  
      
}(); //错误
```
上面的代码是错误的，因为Javascript将function关键字当作一个函数声明的开始，而函数声明后面不能加圆括号，如果你不显示告诉编译器，它会默认生成一个缺少名字的function，并且抛出一个语法错误，因为function声明需要一个名字。有趣的是，即便你为上面那个错误的代码加上一个名字，他也会提示语法错误，只不过和上面的原因不一样。提示为：`Uncaught SyntaxError: Unexpected token (`。在一个表达式后面加上括号()，该表达式会立即执行，但是在一个语句后面加上括号()，是完全不一样的意思，只是分组操作符。
```js
function foo(){
   alert('测试是否弹窗')
}() 
// SyntaxError: Unexpected token ) 
// 报错因为分组操作符需要包含表达式
```

```js
function foo(){ 
    alert('测试是否弹窗')
}(1) 
// (1) => 等价于 1
// 相当于foo方法后面个跟了一个无关系的表达式子:(1)
```

所以上面代码要是想要得到想要的弹窗提示，就必须要实现赋值，如:
```js
a = function(){
    alert('测试是否弹窗')
}()
// 弹窗提示成功
```
"a=" 这个片段告诉了编译器这个是一个函数表达式，而不是函数的声明。因为函数表达式后面可以跟圆括号

因此下面两段代码是等价的：
```js
var aa = function(x){  
    alert(x)  
}(5) //弹窗显示：5 

(function(x){
    alert(x)
})(5) //弹窗显示：5 
```
```js
//分组操作符
function foo(){
    console.log('hello');
}(1);

var a=function(){
    console.log('hello a');
}();

(function(){console.log('hello b')})();
```

